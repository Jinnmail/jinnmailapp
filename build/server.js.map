{"version":3,"sources":["../src/server.js"],"names":["cores","os","cpus","length","app","http","createServer","server","listen","port","on","error","connected","logger","info","Date","process","pid","syscall","console","log","bind","code","warn","exit"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,QAAQC,aAAGC,IAAH,GAAUC,MAAxB;AACA,IAAMC,MAAMC,eAAKC,YAAL,CAAkBC,aAAlB,CAAZ;AACAH,IAAII,MAAJ,CAAW,uBAAOC,IAAlB;AACAL,IAAIM,EAAJ,CAAO,OAAP,EAAgBC,KAAhB;AACAP,IAAIM,EAAJ,CAAO,WAAP,EAAoBE,SAApB;;AAEA,SAASA,SAAT,GAAqB;AACjBC,qBAAOC,IAAP,kBAA2B,IAAIC,IAAJ,EAA3B,eAA+CC,QAAQC,GAAvD,YAAiE,uBAAOR,IAAxE;AACH;;AAED,SAASE,KAAT,GAAiB;AACb,QAAIA,MAAMO,OAAN,KAAkB,QAAtB,EAAgC;AAC5BC,gBAAQC,GAAR,CAAYT,KAAZ;AACH;AACD,QAAMU,OAAQ,OAAO,uBAAOZ,IAAd,KAAuB,QAAxB,GAAoC,UAAU,uBAAOA,IAArD,GAA4D,UAAU,uBAAOA,IAA1F;AACA,YAAQE,MAAMW,IAAd;AACI,aAAK,QAAL;AACIT,6BAAOU,IAAP,CAAeF,IAAf;AACAL,oBAAQQ,IAAR,CAAa,CAAb;AACA;AACJ,aAAK,YAAL;AACIX,6BAAOU,IAAP,CAAeF,IAAf;AACAL,oBAAQQ,IAAR,CAAa,CAAb;AACA;AACJ;AACI,kBAAMb,KAAN;AAVR;AAYH","file":"server.js","sourcesContent":["import http from 'http'\r\nimport server from './app'\r\nimport cred from './config/const'\r\nimport logger from './utils/logger'\r\nimport cluster from 'cluster'\r\nimport os from 'os'\r\n\r\nconst cores = os.cpus().length\r\nconst app = http.createServer(server)\r\napp.listen(cred().port)\r\napp.on('error', error)\r\napp.on('listening', connected)\r\n\r\nfunction connected() {\r\n    logger.info(` started at ${new Date()}, PID: ${process.pid} at ${cred().port}`)\r\n}\r\n\r\nfunction error() {\r\n    if (error.syscall !== 'listen') {\r\n        console.log(error)\r\n    }\r\n    const bind = (typeof cred().port === 'string') ? 'Pipe ' + cred().port : 'Port ' + cred().port;\r\n    switch (error.code) {\r\n        case 'EACCES':\r\n            logger.warn(`${bind} requires elevated privileges`)\r\n            process.exit(1);\r\n            break;\r\n        case 'EADDRINUSE':\r\n            logger.warn(`${bind} is already in use`)\r\n            process.exit(1);\r\n            break;\r\n        default:\r\n            throw error;\r\n    }\r\n}\r\n\r\n\r\n"]}