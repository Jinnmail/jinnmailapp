{"version":3,"sources":["../src/server.js"],"names":["cores","os","cpus","length","app","http","createServer","server","listen","process","env","PORT","on","error","connected","logger","info","Date","pid","syscall","console","log","bind","port","code","warn","exit"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,QAAQC,aAAGC,IAAH,GAAUC,MAAxB;AACA,IAAMC,MAAMC,eAAKC,YAAL,CAAkBC,aAAlB,CAAZ;AACAH,IAAII,MAAJ,CAAWC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAA/B;AACAP,IAAIQ,EAAJ,CAAO,OAAP,EAAgBC,KAAhB;AACAT,IAAIQ,EAAJ,CAAO,WAAP,EAAoBE,SAApB;;AAEA,SAASA,SAAT,GAAqB;AACjBC,qBAAOC,IAAP,kBAA2B,IAAIC,IAAJ,EAA3B,eAA+CR,QAAQS,GAAvD;AACH;;AAED,SAASL,KAAT,GAAiB;AACb,QAAIA,MAAMM,OAAN,KAAkB,QAAtB,EAAgC;AAC5BC,gBAAQC,GAAR,CAAYR,KAAZ;AACH;AACD,QAAMS,OAAQ,OAAO,uBAAOC,IAAd,KAAuB,QAAxB,GAAoC,UAAU,uBAAOA,IAArD,GAA4D,UAAU,uBAAOA,IAA1F;AACA,YAAQV,MAAMW,IAAd;AACI,aAAK,QAAL;AACIT,6BAAOU,IAAP,CAAeH,IAAf;AACAb,oBAAQiB,IAAR,CAAa,CAAb;AACA;AACJ,aAAK,YAAL;AACIX,6BAAOU,IAAP,CAAeH,IAAf;AACAb,oBAAQiB,IAAR,CAAa,CAAb;AACA;AACJ;AACI,kBAAMb,KAAN;AAVR;AAYH","file":"server.js","sourcesContent":["import http from 'http'\nimport server from './app'\nimport cred from './config/const'\nimport logger from './utils/logger'\nimport cluster from 'cluster'\nimport os from 'os'\n\nconst cores = os.cpus().length\nconst app = http.createServer(server)\napp.listen(process.env.PORT || 9000)\napp.on('error', error)\napp.on('listening', connected)\n\nfunction connected() {\n    logger.info(` started at ${new Date()}, PID: ${process.pid}`);\n}\n\nfunction error() {\n    if (error.syscall !== 'listen') {\n        console.log(error)\n    }\n    const bind = (typeof cred().port === 'string') ? 'Pipe ' + cred().port : 'Port ' + cred().port;\n    switch (error.code) {\n        case 'EACCES':\n            logger.warn(`${bind} requires elevated privileges`)\n            process.exit(1);\n            break;\n        case 'EADDRINUSE':\n            logger.warn(`${bind} is already in use`)\n            process.exit(1);\n            break;\n        default:\n            throw error;\n    }\n}\n"]}