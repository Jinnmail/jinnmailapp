{"version":3,"sources":["../../src/services/mail.js"],"names":["email_sender","forget_mail","sg","require","process","env","SENDGRID_API_KEY","toEmails","code","console","log","i","length","senderEmail","helper","Email","toEmail","content","Content","mail","Mail","request","emptyRequest","method","path","body","toJSON","API","error","response","statusCode","msg"],"mappings":";;;;;QAKgBA,Y,GAAAA,Y;QAuCAC,W,GAAAA,W;;AA5ChB;;AACA;;;;;;AACA,IAAMC,KAAKC,QAAQ,UAAR,EAAoBC,QAAQC,GAAR,CAAYC,gBAAhC,CAAX;AACA;;AAEO,SAASN,YAAT,CACHO,QADG,EAEHC,IAFG,EAGL;AACEC,YAAQC,GAAR,CAAYF,IAAZ;;AAEA,SAAK,IAAIG,IAAI,CAAb,EAAgBA,IAAIJ,SAASK,MAA7B,EAAqCD,KAAK,CAA1C,EAA6C;AACzC;AACA,YAAME,cAAc,IAAIC,eAAOC,KAAX,CAAiB,qBAAjB,CAApB;AACA;AACA,YAAMC,UAAU,IAAIF,eAAOC,KAAX,CAAiBR,SAASI,CAAT,CAAjB,CAAhB;AACA;AACA,YAAMM,UAAU,IAAIH,eAAOI,OAAX,CAAmB,WAAnB,kDAA8EV,IAA9E,CAAhB;AACA,YAAMW,OAAO,IAAIL,eAAOM,IAAX,CAAgBP,WAAhB,EAA6B,UAA7B,EAAyCG,OAAzC,EAAkDC,OAAlD,CAAb;AACA,YAAMI,UAAUnB,GAAGoB,YAAH,CAAgB;AAC5BC,oBAAQ,MADoB;AAE5BC,kBAAM,eAFsB;AAG5BC,kBAAMN,KAAKO,MAAL;AAHsB,SAAhB,CAAhB;AAKAxB,WAAGyB,GAAH,CAAON,OAAP,EAAgB,UAACO,KAAD,EAAQC,QAAR,EAAqB;AACjCpB,oBAAQC,GAAR,CAAY,UAAZ;AACA,gBAAIkB,KAAJ,EAAW;AACPnB,wBAAQC,GAAR,CAAY,yBAAZ;AACH;AACDD,oBAAQC,GAAR,CAAYmB,QAAZ,EAAqBD,KAArB;AACAnB,oBAAQC,GAAR,CAAYmB,SAASC,UAArB;AACArB,oBAAQC,GAAR,CAAYmB,SAASJ,IAArB;AACA;AACH,SATD;AAUH;AACD;AACA;AACA;AACA;AACA;AACA;AACH;;AAGM,SAASxB,WAAT,CACHM,QADG,EAEHwB,GAFG,EAGL;AACE,SAAK,IAAIpB,IAAI,CAAb,EAAgBA,IAAIJ,SAASK,MAA7B,EAAqCD,KAAK,CAA1C,EAA6C;AACzC;AACA,YAAME,cAAc,IAAIC,eAAOC,KAAX,CAAiB,qBAAjB,CAApB;AACA;AACA,YAAMC,UAAU,IAAIF,eAAOC,KAAX,CAAiBR,SAASI,CAAT,CAAjB,CAAhB;AACA;AACA,YAAMM,UAAU,IAAIH,eAAOI,OAAX,CAAmB,WAAnB,EAAgCa,GAAhC,CAAhB;AACA,YAAMZ,OAAO,IAAIL,eAAOM,IAAX,CAAgBP,WAAhB,EAA6B,QAA7B,EAAuCG,OAAvC,EAAgDC,OAAhD,CAAb;AACA,YAAMI,UAAUnB,GAAGoB,YAAH,CAAgB;AAC5BC,oBAAQ,MADoB;AAE5BC,kBAAM,eAFsB;AAG5BC,kBAAMN,KAAKO,MAAL;AAHsB,SAAhB,CAAhB;AAKAxB,WAAGyB,GAAH,CAAON,OAAP,EAAgB,UAACO,KAAD,EAAQC,QAAR,EAAqB;AACjCpB,oBAAQC,GAAR,CAAY,UAAZ;AACA,gBAAIkB,KAAJ,EAAW;AACPnB,wBAAQC,GAAR,CAAY,yBAAZ;AACH;AACDD,oBAAQC,GAAR,CAAYmB,QAAZ,EAAqBD,KAArB;AACAnB,oBAAQC,GAAR,CAAYmB,SAASC,UAArB;AACArB,oBAAQC,GAAR,CAAYmB,SAASJ,IAArB;AACA;AACH,SATD;AAUH;AACD;AACA;AACA;AACA;AACA;AACA;AACH;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mail.js","sourcesContent":["import { mail as helper } from 'sendgrid';\nimport async from 'async';\nconst sg = require('sendgrid')(process.env.SENDGRID_API_KEY);\n// const sgInbound = require('@sendgrid/inbound-mail-parser')(process.env.SENDGRID_API_KEY);\n\nexport function email_sender(\n    toEmails,\n    code\n) {\n    console.log(code);\n    \n    for (let i = 0; i < toEmails.length; i += 1) {\n        // Add from emails\n        const senderEmail = new helper.Email('george@jinnmail.com');\n        // Add to email\n        const toEmail = new helper.Email(toEmails[i]);\n        // HTML Content\n        const content = new helper.Content('text/html', `welcome to jinnmail, verification code is: ${code}`);\n        const mail = new helper.Mail(senderEmail, 'jinnmail', toEmail, content);\n        const request = sg.emptyRequest({\n            method: 'POST',\n            path: '/v3/mail/send',\n            body: mail.toJSON()\n        });\n        sg.API(request, (error, response) => {\n            console.log('SendGrid');\n            if (error) {\n                console.log('Error response received');\n            }\n            console.log(response,error)\n            console.log(response.statusCode);\n            console.log(response.body);\n            // console.log(response.headers);\n        });\n    }\n    // parentCallback(null,\n    //     {\n    //         successfulEmails,\n    //         errorEmails,\n    //     }\n    // );\n}\n\n\nexport function forget_mail(\n    toEmails,\n    msg\n) {\n    for (let i = 0; i < toEmails.length; i += 1) {\n        // Add from emails\n        const senderEmail = new helper.Email('george@jinnmail.com');\n        // Add to email\n        const toEmail = new helper.Email(toEmails[i]);\n        // HTML Content\n        const content = new helper.Content('text/html', msg);\n        const mail = new helper.Mail(senderEmail, 'forget', toEmail, content);\n        const request = sg.emptyRequest({\n            method: 'POST',\n            path: '/v3/mail/send',\n            body: mail.toJSON()\n        });\n        sg.API(request, (error, response) => {\n            console.log('SendGrid');\n            if (error) {\n                console.log('Error response received');\n            }\n            console.log(response,error)\n            console.log(response.statusCode);\n            console.log(response.body);\n            // console.log(response.headers);\n        });\n    }\n    // parentCallback(null,\n    //     {\n    //         successfulEmails,\n    //         errorEmails,\n    //     }\n    // );\n}\n\n// async.parallel([\n//     callback => {\n//         email_sender(\n//             callback,\n//             'george@jinnmail.com',\n//             ['anuragpurwar007@gmail.com'],\n//             'Subject Line',\n//             'Text Content',\n//             '<p style=\"font-size: 32px;\">HTML Content</p>'\n//         );\n//     }\n// ], (err, results) => {\n//     console.log(results, \"res\")\n// });\n\n\n// const sgMail = require('@sendgrid/mail');\n// sgMail.setApiKey(process.env.SENDGRID_API_KEY);\n// export function email_sender(to) {\n//     console.log(to)\n//   const msg = {\n//         to: to,\n//         from:\"george@jinnmail.com\",\n//         subject: 'jinnmail',\n//         text: 'hello',\n//         html: '<strong>welcome to jinnmail</strong>',\n//     };\n//     sgMail.send(msg);\n// }"]}